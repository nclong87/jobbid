<?php

class Application_Model_Site_Yes24
{
	protected static $_instance = null;
	var $cookie = 'Cookie: __utma=49630894.1644758357.1367258846.1367384911.1367852803.5; __utmz=49630894.1367258846.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); LoginIdChk=1; LoginId=nclong87; skyUrl=976558%2C972579%2C1000745%2C983962%2C851579%2C850752; skyImage=/Upload/ProductImage/istyle24_FashionAcc/976558_XS.jpg%2C/Upload/ProductImage/YES24DTDD/972579_XS.jpg%2C/Upload/ProductImage/YES24DTDD/1000745_XS.jpg%2C/Upload/ProductImage/YES24DTDD/983962_XS.jpg%2C/Upload/ProductImage/YES24DTDD/851579_XS.jpg%2C/Upload/ProductImage/YES24DTDD/850752_XS.jpg; __atuvc=3%7C18%2C1%7C19; EventBannerHis=503080; ASP.NET_SessionId=1dj3okvi01gvyx45bgr3qa45; __utmc=49630894; .YES24Front_AUTH=BB78BE50F731F6536CB53E1AC1A6E5E256996B77ADE3E8D23C0156E0217B7B38AE9128B7D692AB9694CBD412DEC7A75F2BC00C13000BBCD1828F093CCF5CA3B73B8CA28F79E2087FDB3E45607BCDA63402BAF700D7E4822A8DA72AA80770A68EC6D33719443E2A2D6A0037C0A9CDAD99E7E693E53C7A8C03E0883634E6EB00F21BD83EFB24D083372322DB1997FDCB34C0AA525B63E37D6EC4764BD88F7A98077E92308A65D1D0161077E5923ABA9FD62CF40114E78E4821937A2CD9078EDB9B7A0602881D3E2ADD3959112F9F2B755EEE5BD05113473E0E65E8A3AF821CA082B40977E8956903F8A443FD8BAECB22BEBA1F00E7EB997F2D47C6BAE10713DAD67E4991A64BC4A73A2EBF3184A734BA0E4471EA62AFC3E4AE39B5463A0EDAD4871A32DA4BA290FBC49F7A74F39CA95058C39B26EDFB33772EF8B88A9932757FF66FE3CA8610470E896EFE60494ADA69D5FC5C2FD0E72A3EDA4338FDAA98C027AC38F6A38708DD9A1BD1FE180C600D4617270FAF753504B5F3E8011C37CE84077BF31E386F3F0D1F979380A69209A410F8325CCEC4C2484325095AAB0D83C37A0A8F3179410FC8CC48250CADC359B1722A006E8C9248A2EFF805E7B9C1CB67CB5E2F98AEA05A2F91E920B4D27E299697FF40A46A15EB4A9DCB02FA528FF1D12CE2B95BD7ECF2CAA5EB5EE8EA08395961BD6C40211D0354C540DC19DBC320AC0F66287FFAF98E47B614BFDF34EAA45EE3DF4748A0209B37BF7DB35087A32E1F8C6162A978DCE21E330CD39CF77E629037F1EB205F41AE16048F3D57F843F0B3BF4B61690F2675CBC55FAD7E53520D5A9C9E4A033D9A7356022AF4A5728572D3B628C5775A1E630452777C1E5ECEC2180F70E4DA0F105D98845A8A55CEE09665AB1B0F2080D4DDF6C1E7E25B1019D7EF3001ACAD615D4C2354C635ECBC6BCD75EAA59449CB125446A09200B6E96F73FF12D00F7C1584F3E82C8F812A29DFC219F7319DE02578476A9E60C141CC7CE785B7FF90F41164DB2E13594412964F56534119BAD4513499BF9A9B6834E95C1C489C27307B2584CADF7542361BBAB0120F6824A16F8A55660DD736890CBD59BAEBF05C1DC70E023AAC66FEFA7C2BC0D584F3916090C58348BEB1BFA43A56B58061E3B4390B9A083EE4D0540FF604FE2805BDD1C905E2A8';
	public static function getInstance($className=__CLASS__){
		//Check instance
		if(empty(self::$_instance)){
			self::$_instance = new $className;
		}
		//Return instance
		return self::$_instance;
	}
	public function __construct(){
		
		 
	}
	public function checkOut() {
		$cUrl = new Core_Dom_Curl(array(
			'method' => 'GET',
			'cookie' => $this->cookie
		));
		$content = $cUrl->getContent('http://www.yes24.vn/Event/2013/san-hang-gio-vang-san-pham.aspx');
		//Core_Utils_Log::write($content);die;
		$doc = Core_Dom_Query::newDocumentHTML($content,'UTF-8');
		$post_data = $doc->find('#form1')->serializeArray();
		//print_r($post_data);
		$array = array(
			
		);
		$post_items = array();
		foreach ($post_data as $item) {
			if(isset($array[$item['name']])) {
				$post_items[] = $item['name'] . '=' . $array[$item['name']];
			} else {
				$post_items[] = $item['name'] . '=' . $item['value'];
			}
			
		}
		$post_string = implode ('&', $post_items);
		$cUrl = new Core_Dom_Curl(array(
			'method' => 'POST',
			'post_fields' => $post_string,
			'url' => 'http://www.yes24.vn/Event/2013/san-hang-gio-vang-san-pham.aspx',
			'cookie' => $this->cookie
		));
		//$result = $cUrl->exec();
	}
	
	public function start() {
		$this->checkOut();
	}
}

